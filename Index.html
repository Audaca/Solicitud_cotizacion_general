<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solicitud de Cotización - La Gráfica Digital</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0C6943 0%, #0a5537 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #0C6943 0%, #0a5537 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 3em;
            font-weight: bold;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .client-info {
            padding: 30px;
            background: linear-gradient(135deg, #0C6943 0%, #0a5537 100%);
            border-bottom: 2px solid #e9ecef;
        }
        
        .client-info h2 {
            color: #ffffff;
            margin-bottom: 20px;
            font-size: 1.5em;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-group label {
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 8px;
            font-size: 0.95em;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }
        
        .form-group input, .form-group select {
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1em;
            transition: all 0.3s ease;
        }
        
        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #0C6943;
            box-shadow: 0 0 0 3px rgba(12, 105, 67, 0.1);
        }
        
        .products-section {
            padding: 30px;
        }
        
        .products-section h2 {
            color: #0C6943;
            margin-bottom: 25px;
            font-size: 1.5em;
        }
        
        .product-card {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            border: 2px solid #e9ecef;
            position: relative;
        }
        
        .product-header {
            display: grid;
            grid-template-columns: auto 1fr auto auto;
            gap: 20px;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e9ecef;
        }
        
        .product-number {
            background: linear-gradient(135deg, #0C6943, #0a5537);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.1em;
        }
        
        .product-info {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            align-items: center;
        }
        
        .product-info select, .product-info input {
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 1em;
        }
        
        .product-info select:focus, .product-info input:focus {
            border-color: #0C6943;
            outline: none;
        }
        
        .delete-product-btn {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }
        
        .delete-product-btn:hover {
            background: #c0392b;
            transform: translateY(-2px);
        }
        
        .components-section h3 {
            color: #0C6943;
            margin-bottom: 15px;
            font-size: 1.2em;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .required-badge {
            background: #e74c3c;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.7em;
            font-weight: 600;
        }
        
        .component-row {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            border: 1px solid #e9ecef;
            position: relative;
        }
        
        /* Contenedor con scroll horizontal para los componentes */
        .components-scroll-container {
            overflow-x: auto;
            margin-bottom: 10px;
        }
        
        .component-grid {
            display: grid;
            grid-template-columns: 200px 80px 80px 80px 150px 150px 150px 150px 150px 200px;
            gap: 10px;
            align-items: center;
            min-width: 1200px; /* Ancho mínimo para forzar scroll horizontal */
        }
        
        .component-grid select, .component-grid input {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 0.85em;
        }
        
        .component-grid select:focus, .component-grid input:focus {
            border-color: #0C6943;
            outline: none;
        }
        
        .delete-component-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.7em;
            transition: background-color 0.3s ease;
            margin-bottom: 2px;
        }
        
        .duplicate-component-btn {
            background: #17a2b8;
            color: white;
            border: none;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.7em;
            transition: background-color 0.3s ease;
        }
        
        .duplicate-component-btn:hover {
            background: #138496;
        }
        
        .delete-component-btn:hover {
            background: #c82333;
        }
        
        .add-component-btn {
            background: linear-gradient(135deg, #0C6943, #0a5537);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-top: 10px;
        }
        
        .add-component-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(12, 105, 67, 0.3);
        }
        
        .add-product-btn {
            background: linear-gradient(135deg, #0C6943, #0a5537);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-bottom: 30px;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
        
        .add-product-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(12, 105, 67, 0.3);
        }
        
        .submit-section {
            background: #f8f9fa;
            padding: 30px;
            border-top: 2px solid #e9ecef;
            text-align: center;
        }
        
        .submit-btn {
            background: linear-gradient(135deg, #0C6943, #0a5537);
            color: white;
            border: none;
            padding: 18px 50px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.2em;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(12, 105, 67, 0.3);
        }
        
        .component-counter {
            position: absolute;
            top: -10px;
            right: 15px;
            background: #0C6943;
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: 600;
        }
        
        .warning-message {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 12px 15px;
            border-radius: 6px;
            margin-top: 10px;
            font-size: 0.9em;
        }
        
        /* Estilos para la barra de scroll horizontal */
        .components-scroll-container::-webkit-scrollbar {
            height: 8px;
        }
        
        .components-scroll-container::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }
        
        .components-scroll-container::-webkit-scrollbar-thumb {
            background: #0C6943;
            border-radius: 4px;
        }
        
        .components-scroll-container::-webkit-scrollbar-thumb:hover {
            background: #0a5537;
        }
        
        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .product-header {
                grid-template-columns: 1fr;
                text-align: center;
            }
            
            .product-info {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>LA GRÁFICA DIGITAL</h1>
            <p>Solicitud de Cotización de Productos Compuestos</p>
        </div>
        
        <div class="client-info">
            <h2>Información del Cliente</h2>
            <div class="form-row">
                <div class="form-group">
                    <label for="clientName">Nombre del Cliente *</label>
                    <input type="text" id="clientName" name="clientName" required>
                </div>
                <div class="form-group">
                    <label for="clientEmail">Correo Electrónico *</label>
                    <input type="email" id="clientEmail" name="clientEmail" required>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label for="clientPhone">Teléfono</label>
                    <input type="tel" id="clientPhone" name="clientPhone">
                </div>
                <div class="form-group">
                    <label for="clientCompany">Empresa</label>
                    <input type="text" id="clientCompany" name="clientCompany">
                </div>
            </div>
        </div>
        
        <div class="products-section">
            <h2>Productos a Cotizar</h2>
            
            <div id="productsContainer">
                <!-- Los productos se generarán dinámicamente -->
            </div>
            
            <button type="button" class="add-product-btn" onclick="addProduct()">+ Agregar Nuevo Producto</button>
        </div>
        
        <div class="submit-section">
            <button type="button" class="submit-btn" onclick="submitForm()">Enviar Solicitud de Cotización</button>
        </div>
    </div>

    <script>
        // Datos de opciones basados en el PDF (ordenados alfabéticamente)
        const productos = [
            "AGENDA EMPRESARIAL", "AFICHES", "ALMANAQUES HOJA SIMPLE", "BANDERINES", "BOLSAS BOUTIQUE", 
            "ALMANAQUES POR HOJAS", "CALENDARIOS", "FOLLETOS", "CAJAS TAPA DURA", "CAJAS VIPACK", 
            "CARPETAS CORPORATIVAS", "CARTELERA", "PORTA ESFEROS", "PORTATACO", "REVISTAS", "TACOS", 
            "FLOOR GRAPHIC", "HOJAS MEMBRETE", "MURAL", "PORTA LAPICES", "POSTERS", "ROMPE TRÁFICO", 
            "SOBRE 20A BOND 23x12 cm", "STICKERS", "TARJETAS DE PRESENTACIÓN", "VOLANTES (FLYERS)", 
            "BROCHURES", "CUADERNO EMPRESARIAL", "BOLSAS ECOLÓGICAS", "BOLSAS KRAFT", "BOLSAS PLÁSTICAS", 
            "CAJAS MICROCORRUGADO", "CAJAS PLEGADIZAS", "PORTA CELULARES", "SOBRES", 
            "PRODUCTOS PROMOCIONALES", "SEÑALIZACIÓN"
        ].sort();
        
        const componentes = [
            "ACETATO", "BANDA ELÁSTICA", "BASE ALMANAQUE", "BASE CALENDARIO", "BOLSILLO", 
            "ESFERO", "HOJAS ALMANAQUE", "HOJAS CALENDARIO", "HOJAS PROGRAMADOR", "HOJAS TACO", 
            "INSERTO", "PÁGINAS INTERIOR", "PORTADA TAPA DURA", "PORTADA TAPA SEMI DURA", 
            "PORTADA TAPA SENCILLA", "SEPARADOR"
        ].sort();
        
        const sustratos = [
            "Bond 75 gr", "Bond 90 gr", "Bond 115 gr", "Bond color", "Cartulina 150 gr", "Kraft", 
            "Adhesivo", "Lino", "Maulle cal 14", "Maulle cal 16", "Maulle cal 18", "Opalina 200 gr", 
            "Opalina 250 gr", "Pergamino", "Periodico Natural", "Poliestileno para bolsas", 
            "Propalcote 115 gr", "Propalcote 150 gr", "Propalcote 200 gr", "Propalcote 240 gr", 
            "Propalcote 300 gr", "Propalcote 90 gr", "Propalmate 240 gr", "Quimico original y 1 copia", 
            "Quimico original y 2 copias", "Quimico original y 3 copias", "Reciclado (Earthpact) 90 gr", 
            "Reciclado (Earthpact) 150 gr", "Reciclado (Earthpact) 200 gr", "Reciclado (Earthpact) 226 gr", 
            "Tela ecológica para bolsas", "Vinilo Laminado", "Vinilo sin laminar", "Vipack - Acetato"
        ].sort();
        
        const tintas = [
            "1 tinta por 1 cara (Color directo)", "1 tinta por las 2 caras (Color directo)",
            "2 tintas por 1 cara", "2 tintas por las 2 caras",
            "4 por 1 cara (Policromía)", "4 tintas por 1 cara (Policromía)", 
            "4 tintas por las 2 caras (Policromía)", "Sin tintas"
        ].sort();
        
        const plastificados = [
            "Plastif. Brillante por 1 cara", "Plastif. Brillante por 2 caras", 
            "Plastif. Mate por 1 cara", "Plastif. Mate por 2 caras", "Sin Plastificar"
        ].sort();
        
        const acabados = [
            "Anillado", "Cinta Doble Faz", "Con pestaña", "Costura 2 ganchos", "Costura Hilo", 
            "Despuntado", "Encolado", "Estampado", "Fajillado", "Grafado", "Hot Melt - Lomo cuadrado", 
            "Medio corte", "Ninguno", "Numerado", "Pegue Colbón", "Pegue silicona", "Perforado", 
            "Personalizado", "Plegado", "Sin acabado", "Tapa Dura", "Tapa Semi Dura", "UV Parcial"
        ].sort();
        
        let productCounter = 1;
        
        function createSelectOptions(options, selectedValue = '') {
            return options.map(option => 
                `<option value="${option}" ${option === selectedValue ? 'selected' : ''}>${option}</option>`
            ).join('');
        }
        
        function addProduct() {
            const container = document.getElementById('productsContainer');
            const productDiv = document.createElement('div');
            productDiv.className = 'product-card';
            productDiv.id = `product-${productCounter}`;
            
            productDiv.innerHTML = `
                <div class="product-header">
                    <div class="product-number">${productCounter}</div>
                    <div class="product-info">
                        <select name="producto" required>
                            <option value="">Seleccione el producto...</option>
                            ${createSelectOptions(productos)}
                        </select>
                        <input type="number" name="cantidad" min="1" placeholder="Cantidad" required>
                    </div>
                    <button type="button" class="delete-product-btn" onclick="deleteProduct(${productCounter})">Eliminar Producto</button>
                </div>
                
                <div class="components-section">
                    <h3>
                        Componentes del Producto 
                    </h3>
                    <div class="component-counter">0 componentes</div>
                    
                    <div class="components-scroll-container">
                        <div class="components-container" id="components-${productCounter}">
                            <!-- Los componentes se agregarán aquí -->
                        </div>
                    </div>
                    
                    <button type="button" class="add-component-btn" onclick="addComponent(${productCounter})">+ Agregar Componente</button>
                    <div class="warning-message" id="warning-${productCounter}" style="display: none;">
                        ⚠️ Se requieren al menos 2 componentes para cada producto
                    </div>
                </div>
            `;
            
            container.appendChild(productDiv);
            
            // Agregar 1 componente por defecto
            addComponent(productCounter);
            
            productCounter++;
        }
        
        function addComponent(productId) {
            const container = document.getElementById(`components-${productId}`);
            const componentDiv = document.createElement('div');
            componentDiv.className = 'component-row';
            
            const componentId = `${productId}-${Date.now()}-${Math.random()}`;
            
            componentDiv.innerHTML = `
                <div class="component-grid">
                    <select name="componente" required>
                        <option value="">Seleccione componente...</option>
                        ${createSelectOptions(componentes)}
                    </select>
                    <input type="number" name="paginas" min="1" placeholder="Págs">
                    <input type="number" name="alto" step="0.1" placeholder="Alto">
                    <input type="number" name="ancho" step="0.1" placeholder="Ancho">
                    <select name="sustrato">
                        <option value="">Sustrato...</option>
                        ${createSelectOptions(sustratos)}
                    </select>
                    <select name="tintas">
                        <option value="">Tintas...</option>
                        ${createSelectOptions(tintas)}
                    </select>
                    <select name="plastificado">
                        <option value="">Sin Plastificar...</option>
                        ${createSelectOptions(plastificados)}
                    </select>
                    <select name="acabados1">
                        <option value="">Acabados 1...</option>
                        ${createSelectOptions(acabados)}
                    </select>
                    <select name="acabados2">
                        <option value="">Acabados 2...</option>
                        ${createSelectOptions(acabados)}
                    </select>
                    <input type="text" name="observaciones" placeholder="Observaciones...">
                </div>
                <div style="display: flex; gap: 5px; margin-top: 5px; justify-content: flex-end;">
                    <button type="button" class="delete-component-btn" onclick="deleteComponent(this, ${productId})">🗑️ Borrar línea</button>
                    <button type="button" class="duplicate-component-btn" onclick="duplicateComponent(this, ${productId})">📋 Duplicar línea</button>
                </div>
            `;
            
            container.appendChild(componentDiv);
            updateComponentCounter(productId);
        }
        
        function deleteComponent(button, productId) {
            const componentsContainer = document.getElementById(`components-${productId}`);
            const componentCount = componentsContainer.children.length;
            
            if (componentCount > 1) {
                button.closest('.component-row').remove();
                updateComponentCounter(productId);
            } else {
                alert('Cada producto debe tener al menos un componente.');
            }
        }
        
        function duplicateComponent(button, productId) {
            const componentRow = button.closest('.component-row');
            const componentsContainer = document.getElementById(`components-${productId}`);
            
            // Crear una copia del componente
            const clonedComponent = componentRow.cloneNode(true);
            
            // Actualizar los event handlers en la copia
            const deleteBtn = clonedComponent.querySelector('.delete-component-btn');
            const duplicateBtn = clonedComponent.querySelector('.duplicate-component-btn');
            
            deleteBtn.onclick = () => deleteComponent(deleteBtn, productId);
            duplicateBtn.onclick = () => duplicateComponent(duplicateBtn, productId);
            
            // Insertar después del componente original
            componentRow.parentNode.insertBefore(clonedComponent, componentRow.nextSibling);
            
            updateComponentCounter(productId);
        }
        
        function deleteProduct(productId) {
            const productDiv = document.getElementById(`product-${productId}`);
            productDiv.remove();
            updateProductNumbers();
        }
        
        function updateComponentCounter(productId) {
            const componentsContainer = document.getElementById(`components-${productId}`);
            const counter = document.querySelector(`#product-${productId} .component-counter`);
            const warning = document.getElementById(`warning-${productId}`);
            const componentCount = componentsContainer.children.length;
            
            counter.textContent = `${componentCount} componente${componentCount !== 1 ? 's' : ''}`;
            counter.style.background = '#0C6943';
        }
        
        function updateProductNumbers() {
            const products = document.querySelectorAll('.product-card');
            products.forEach((product, index) => {
                const numberDiv = product.querySelector('.product-number');
                if (numberDiv) {
                    numberDiv.textContent = index + 1;
                }
            });
        }
        
        function validateForm() {
            const nombre = document.getElementById('clientName').value.trim();
            const email = document.getElementById('clientEmail').value.trim();
            
            if (!nombre) {
                alert('Por favor, ingrese el nombre del cliente.');
                return false;
            }
            
            if (!email) {
                alert('Por favor, ingrese el correo electrónico del cliente.');
                return false;
            }
            
            const products = document.querySelectorAll('.product-card');
            if (products.length === 0) {
                alert('Por favor, agregue al menos un producto para cotizar.');
                return false;
            }
            
            // Validar que cada producto tenga al menos 2 componentes
            for (let product of products) {
                const productNumber = product.querySelector('.product-number').textContent;
                const productSelect = product.querySelector('select[name="producto"]');
                const cantidadInput = product.querySelector('input[name="cantidad"]');
                const componentsContainer = product.querySelector('.components-container');
                
                if (!productSelect.value) {
                    alert(`Por favor, seleccione el tipo de producto para el producto #${productNumber}.`);
                    return false;
                }
                
                if (!cantidadInput.value || cantidadInput.value < 1) {
                    alert(`Por favor, ingrese una cantidad válida para el producto #${productNumber}.`);
                    return false;
                }
                
                const componentCount = componentsContainer.children.length;
                if (componentCount < 1) {
                    alert(`El producto #${productNumber} necesita al menos 1 componente.`);
                    return false;
                }
                
                // Validar que cada componente tenga al menos el campo principal seleccionado
                const components = componentsContainer.querySelectorAll('.component-row');
                for (let i = 0; i < components.length; i++) {
                    const componentSelect = components[i].querySelector('select[name="componente"]');
                    if (!componentSelect.value) {
                        alert(`Por favor, seleccione el tipo de componente para el componente #${i + 1} del producto #${productNumber}.`);
                        return false;
                    }
                }
            }
            
            return true;
        }
        
        function collectFormData() {
            const formData = {
                cliente: {
                    nombre: document.getElementById('clientName').value,
                    email: document.getElementById('clientEmail').value,
                    telefono: document.getElementById('clientPhone').value,
                    empresa: document.getElementById('clientCompany').value
                },
                productos: []
            };
            
            const products = document.querySelectorAll('.product-card');
            products.forEach((product, productIndex) => {
                const productData = {
                    item: productIndex + 1,
                    producto: product.querySelector('select[name="producto"]').value,
                    cantidad: product.querySelector('input[name="cantidad"]').value,
                    componentes: []
                };
                
                const components = product.querySelectorAll('.component-row');
                components.forEach((component, componentIndex) => {
                    const componentData = {
                        componente: component.querySelector('select[name="componente"]').value,
                        paginas: component.querySelector('input[name="paginas"]').value,
                        alto: component.querySelector('input[name="alto"]').value,
                        ancho: component.querySelector('input[name="ancho"]').value,
                        sustrato: component.querySelector('select[name="sustrato"]').value,
                        tintas: component.querySelector('select[name="tintas"]').value,
                        plastificado: component.querySelector('select[name="plastificado"]').value,
                        acabados1: component.querySelector('select[name="acabados1"]').value,
                        acabados2: component.querySelector('select[name="acabados2"]').value,
                        observaciones: component.querySelector('input[name="observaciones"]').value
                    };
                    productData.componentes.push(componentData);
                });
                
                formData.productos.push(productData);
            });
            
            return formData;
        }
        
        function submitForm() {
            if (!validateForm()) return;
            
            const formData = collectFormData();
            
            // Crear el contenido del email
            let emailBody = `SOLICITUD DE COTIZACIÓN - LA GRÁFICA DIGITAL\n\n`;
            emailBody += `INFORMACIÓN DEL CLIENTE:\n`;
            emailBody += `Nombre: ${formData.cliente.nombre}\n`;
            emailBody += `Email: ${formData.cliente.email}\n`;
            emailBody += `Teléfono: ${formData.cliente.telefono || 'No especificado'}\n`;
            emailBody += `Empresa: ${formData.cliente.empresa || 'No especificada'}\n\n`;
            emailBody += `PRODUCTOS A COTIZAR:\n\n`;
            
            formData.productos.forEach(producto => {
                emailBody += `${producto.item}. ${producto.producto} (Cantidad: ${producto.cantidad})\n`;
                emailBody += `   COMPONENTES:\n`;
                
                producto.componentes.forEach((componente, index) => {
                    emailBody += `   ${index + 1}. ${componente.componente}\n`;
                    if (componente.paginas) emailBody += `      Páginas: ${componente.paginas}\n`;
                    if (componente.alto && componente.ancho) emailBody += `      Tamaño: ${componente.alto} x ${componente.ancho} cm\n`;
                    if (componente.sustrato) emailBody += `      Sustrato: ${componente.sustrato}\n`;
                    if (componente.tintas) emailBody += `      Tintas: ${componente.tintas}\n`;
                    if (componente.plastificado) emailBody += `      Plastificado: ${componente.plastificado}\n`;
                    if (componente.acabados1) emailBody += `      Acabados 1: ${componente.acabados1}\n`;
                    if (componente.acabados2) emailBody += `      Acabados 2: ${componente.acabados2}\n`;
                    if (componente.observaciones) emailBody += `      Observaciones: ${componente.observaciones}\n`;
                    emailBody += `\n`;
                });
                emailBody += `\n`;
            });
            
            // Crear el enlace de email
            const subject = encodeURIComponent('Solicitud de Cotización - ' + formData.cliente.nombre);
            const body = encodeURIComponent(emailBody);
            const emailDestino = 'lagrafikashop@gmail.com';
            const mailtoLink = `mailto:${emailDestino}?subject=${subject}&body=${body}`;
            
            // Intentar abrir el cliente de email
            try {
                // Crear un enlace temporal y hacer clic en él
                const tempLink = document.createElement('a');
                tempLink.href = mailtoLink;
                tempLink.style.display = 'none';
                document.body.appendChild(tempLink);
                tempLink.click();
                document.body.removeChild(tempLink);
                
                // Mostrar mensaje con instrucciones alternativas
                setTimeout(() => {
                    const shouldCopy = confirm(
                        'Se intentó abrir su cliente de correo electrónico.\n\n' +
                        '• Si se abrió correctamente, solo envíe el email.\n' +
                        '• Si no se abrió, ¿desea copiar la información al portapapeles para enviarla manualmente a lagrafikashop@gmail.com?'
                    );
                    
                    if (shouldCopy) {
                        const textToCopy = `Para: lagrafikashop@gmail.com\nAsunto: ${decodeURIComponent(subject)}\n\n${emailBody}`;
                        
                        // Intentar copiar al portapapeles
                        if (navigator.clipboard && window.isSecureContext) {
                            navigator.clipboard.writeText(textToCopy).then(() => {
                                alert('✅ Información copiada al portapapeles.\n\nPor favor:\n1. Abra su cliente de correo\n2. Pegue el contenido (Ctrl+V)\n3. Envíe el email');
                            }).catch(() => {
                                showTextToCopy(textToCopy);
                            });
                        } else {
                            showTextToCopy(textToCopy);
                        }
                    }
                }, 1000);
                
            } catch (error) {
                console.error('Error al intentar abrir cliente de email:', error);
                alert('No se pudo abrir el cliente de email automáticamente. Por favor envíe la información manualmente a lagrafikashop@gmail.com');
            }
        }
        
        function showTextToCopy(text) {
            // Crear un modal simple para mostrar el texto
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.5);
                z-index: 10000;
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 20px;
                box-sizing: border-box;
            `;
            
            const content = document.createElement('div');
            content.style.cssText = `
                background: white;
                padding: 20px;
                border-radius: 10px;
                max-width: 90%;
                max-height: 90%;
                overflow: auto;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            `;
            
            const title = document.createElement('h3');
            title.textContent = 'Copie esta información y envíela a lagrafikashop@gmail.com';
            title.style.marginBottom = '15px';
            
            const textarea = document.createElement('textarea');
            textarea.value = text;
            textarea.style.cssText = `
                width: 100%;
                height: 300px;
                padding: 10px;
                border: 1px solid #ddd;
                border-radius: 5px;
                font-family: monospace;
                font-size: 12px;
                resize: vertical;
            `;
            textarea.readOnly = true;
            
            const buttonContainer = document.createElement('div');
            buttonContainer.style.cssText = 'margin-top: 15px; text-align: center;';
            
            const selectBtn = document.createElement('button');
            selectBtn.textContent = 'Seleccionar Todo';
            selectBtn.style.cssText = `
                background: #0C6943;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                margin-right: 10px;
                cursor: pointer;
            `;
            selectBtn.onclick = () => {
                textarea.select();
                textarea.setSelectionRange(0, 99999); // Para móviles
            };
            
            const closeBtn = document.createElement('button');
            closeBtn.textContent = 'Cerrar';
            closeBtn.style.cssText = `
                background: #6c757d;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
            `;
            closeBtn.onclick = () => document.body.removeChild(modal);
            
            buttonContainer.appendChild(selectBtn);
            buttonContainer.appendChild(closeBtn);
            
            content.appendChild(title);
            content.appendChild(textarea);
            content.appendChild(buttonContainer);
            modal.appendChild(content);
            document.body.appendChild(modal);
            
            // Auto-seleccionar el texto
            setTimeout(() => {
                textarea.focus();
                textarea.select();
            }, 100);
        }
        
        // Agregar un producto inicial
        addProduct();
    </script>
</body>
</html>